<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>카운팅 애니메이션</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH"
      crossorigin="anonymous"
    />

    <link rel="stylesheet" href="./style.css" />
    <style>
      .temp {
        background-color: silver;
        height: 1000px;
      }
    </style>
  </head>
  <body>
    <section class="temp">스크롤용</section>
    <section class="section-wrap counters bg-color">
      <div class="container">
        <div class="row">
          <div class="col-sm-3 col-xs-6 mb-40">
            <div class="statistic text-center">
              <span class="statistic-timer" data-from="0" data-to="968"
                >968</span
              >
              <h5 class="counter-text">Review</h5>
            </div>
          </div>

          <div class="col-sm-3 col-xs-6 mb-40">
            <div class="statistic text-center">
              <span class="statistic-timer" data-from="0" data-to="357"
                >357</span
              >
              <h5 class="counter-text">Happy Clients</h5>
            </div>
          </div>

          <div class="col-sm-3 col-xs-6 mb-40">
            <div class="statistic text-center">
              <span class="statistic-timer" data-from="0" data-to="813"
                >813</span
              >
              <h5 class="counter-text">Marketing Goals</h5>
            </div>
          </div>

          <div class="col-sm-3 col-xs-6 mb-40">
            <div class="statistic text-center">
              <span class="statistic-timer" data-from="0" data-to="972"
                >972</span
              >
              <h5 class="counter-text">Awesome Ideas</h5>
            </div>
          </div>
        </div>
      </div>
    </section>

    <script>
      const statisticTimers = document.querySelectorAll(".statistic-timer");

      function countingAnimation() {
        statisticTimers.forEach((timer) => {
          const dataFrom = parseInt(timer.dataset.from, 10); // Get the starting value
          const dataTo = parseInt(timer.dataset.to, 10); // Get the target value
          const duration = 2000; // Adjust duration (in milliseconds) for animation speed

          let currentCount = dataFrom;
          const increment = (dataTo - dataFrom) / (duration / 16); // Calculate increment per frame

          const animate = () => {
            currentCount += increment;

            timer.textContent = Math.floor(currentCount); // Update displayed value

            if (currentCount < dataTo) {
              requestAnimationFrame(animate);
            }
          };

          animate();
        });
      }

      countingAnimation();
    </script>
  </body>
</html>
